<!DOCTYPE html>
<html>
<head>
  <title>Katalog Ladang Vape</title>
  <style>
    .produk { border: 1px solid #ccc; padding: 10px; margin: 10px; }
    .produk img { width: 150px; }
  </style>
</head>
<body>
  <h1>Katalog Produk</h1>
  <div id="katalog"></div>

  <script>
    console.log("Memuat katalog..."); // DEBUG

    fetch("/api/katalog")
      .then(res => res.json())
      .then(data => {
        console.log("Data katalog:", data); // DEBUG

        const container = document.getElementById("katalog");
        data.produk.forEach(p => {
          if (parseInt(p.stok) > 0) {
            const div = document.createElement("div");
            div.className = "produk";
            div.innerHTML = `
              <h3>${p.flavor}</h3>
              <img src="${p.image}" alt="${p.flavor}">
              <p>${p.caption}</p>
              <p><strong>Harga:</strong> ${p.price}k</p>
              <p><strong>Stok:</strong> ${p.stok}</p>
              <button onclick="tambahKeKeranjang('${p.flavor}', ${p.price})">Tambah ke Keranjang</button>
            `;
            container.appendChild(div);
          }
        });
      })
      .catch(err => {
        console.error("Gagal ambil katalog:", err);
      });

    function tambahKeKeranjang(flavor, price) {
      alert(`Ditambahkan: ${flavor} - ${price}k`);
    }
  </script>
</body>
</html>
